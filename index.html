<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Senin Ä°Ã§in</title>

<style>
@font-face {
  font-family: "BreathRiver";
  src: url("fonts/BreathOfTheRiver.ttf") format("truetype");
}

body {
  margin: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 24px;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #ffd6e8, #d7eaff);
  font-family: "BreathRiver", cursive;
}

#content {
  max-width: 320px;
  text-align: center;
  font-size: 26px;
  line-height: 1.3;
  opacity: 0;
  transition: opacity .5s;
  min-height: 50px;
  color: #333;
}

#content img {
  width: 100%;
  border-radius: 14px;
  margin-bottom: 10px;
}

button {
  border: none;
  padding: 14px 26px;
  border-radius: 14px;
  font-size: 20px;
  cursor: pointer;
  background: rgba(255, 80, 110, .8);
  color: white;
  backdrop-filter: blur(20px);
  font-family: inherit;
  transition: transform .15s;
}
button:hover {
  transform: scale(1.05);
}

.heart {
  position: fixed;
  font-size: 18px;
  pointer-events: none;
  animation: floatUp 1.2s ease-out forwards;
}

@keyframes floatUp {
  from { transform: translateY(0) scale(1); opacity: 1; }
  to   { transform: translateY(-80px) scale(.5); opacity: 0; }
}

#openingScreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #ffd6e8, #d7eaff);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 1;
  transition: opacity 0.8s ease-out;
}

#openingScreen.fade-out {
  opacity: 0;
  pointer-events: none;
}

#openingMessage {
  font-size: 32px;
  color: #333;
  text-align: center;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

#mainContent {
  opacity: 0;
  transition: opacity 0.8s ease-in;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  width: 100%;
  height: 100vh;
}

#mainContent.show {
  opacity: 1;
}
</style>
</head>

<body>

<div id="openingScreen">
  <div id="openingMessage">Sana Bir SÃ¼rprizim Vaarrr ğŸ’</div>
</div>

<div id="mainContent">
  <div id="content"></div>
  <button id="nextBtn">ğŸ’</button>
</div>

<script>
// Embedded data as fallback
const embeddedItems = [
    { "type":"text", "text":"seninle her an her ÅŸey hayatÄ±mÄ±n en mÃ¼kemmel anlarÄ±ndan biriğŸ«€" },
    { "type":"text", "text":"gÃ¶zlerine baktÄ±kÃ§a iÃ§im huzurla doluyorğŸ¥°" },
    { "type":"text", "text":"seni dÃ¼nden Ã§ok yarÄ±ndan az seviyorum(yarÄ±n olsuun)ğŸ¤­" },
    { "type":"image", "img":"img/IMG_1170.jpeg", "text":"allahÄ±m tipini yirim Ã§ok yakÄ±ÅŸÄ±klÄ±sÄ±nğŸ˜" },
    { "type":"text", "text":"seni anneciÄŸimiz benim iÃ§in doÄŸurmuÅŸ ben biraz beklettim ama kusuruma bakmağŸ˜" },
    { "type":"image", "img":"img/IMG_2035.jpeg", "text":"ateÅŸle su bizzikooğŸ«±ğŸ»â€ğŸ«²ğŸ¼" },
    { "type":"text", "text":"sen benim huzur bulduÄŸum yerimsinğŸ« " },
    { "type":"text", "text":"sana sarÄ±lÄ±nca dÃ¼nyanÄ±n bÃ¼tÃ¼n kÃ¶tÃ¼lÃ¼kleri yok oluyorğŸ«‚" },
    { "type":"text", "text":"iyi ki doÄŸmuÅŸsun iyi ki birbirimizi bulmuÅŸuzğŸ¥¹" },
    { "type":"image", "img":"img/IMG_6839.jpeg", "text":"birlikte Ã§ok gÃ¼zelizzzğŸ’˜" },
    { "type":"text", "text":"birlikte daha bissÃ¼rÃ¼ mÃ¼kemmel mutlu huzurlu gÃ¼nlerimiz olucakğŸ˜Œ" },
    { "type":"text", "text":"baÅŸÄ±ma gelen en ve tek gÃ¼zel ÅŸeysin bitanemğŸ«‚" },
    { "type":"image", "img":"img/IMG_2166.jpeg", "text":"bÃ¼tÃ¼n Ã¶mrÃ¼mÃ¼z bÃ¶yle birlikte geÃ§ecek hayatÄ±m ve anlamÄ±Ä±Ä±mmmğŸ’—" },
    { "type":"text", "text":"sÃ¶z seni her daim seveceÄŸimğŸ˜š" },
    { "type":"text", "text":"uyanÄ±nca ilk, uyurken son dÃ¼ÅŸÃ¼ncemsinğŸ’“" },
    { "type":"image", "img":"img/kissing.jpg", "text":"Ã‡OK SEVÄ°YORUM SENÄ° KOCAAMMMMMMğŸ’" },
    { "type":"text", "text":"bana bu kadar gÃ¼zellikler yaÅŸattÄ±ÄŸÄ±n iÃ§in teÅŸekkÃ¼r ederim aÅŸk bahÃ§emmmmğŸ‘©ğŸ»â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ»" },
    { "type":"text", "text":"iyi ki 1 sene Ã¶nce bu doÄŸum gÃ¼nÃ¼ konusu aÃ§Ä±ldÄ± da birbirimize yakÄ±nlaÅŸtÄ±kğŸ¥°" },
    { "type":"image", "img":"img/IMG_6518.jpeg", "text":"Ã¶lÃ¼rÃ¼m sanaaaaaaağŸ¤¤" },
    { "type":"text", "text":"tek deÄŸerli varlÄ±ÄŸÄ±m sensiiinn kocaammmmmğŸ« " },
    { "type":"text", "text":"varlÄ±ÄŸÄ±m varlÄ±ÄŸÄ±na armaÄŸan olsun yakÄ±ÅŸÄ±klÄ±Ä±mmmmğŸ¤­" },
    { "type":"text", "text":"aklÄ±m fikrim her ÅŸeyim sensinğŸ«‚" },
    { "type":"image", "img":"img/hugging.jpg", "text":"sonsuza kadar sarÄ±lalÄ±mmmmğŸ’" },
    { "type":"text", "text":"I WANNA BE YOURSğŸ—£ï¸(e zateenn aÅŸkooooğŸ¤­)" }
];

let items = [];

async function loadData(){
  try {
    console.log("Attempting to load data from file...");
    const res = await fetch("data/items.json");
    console.log("Response status:", res.status, res.ok);
    if (!res.ok) {
      throw new Error(`HTTP error! status: ${res.status}`);
    }
    const data = await res.json();
    items = data;
    console.log("Successfully loaded", items.length, "items from file");
    return true;
  } catch (error) {
    console.warn("Could not load from file, using embedded data:", error.message);
    // Use embedded data as fallback
    items = embeddedItems;
    console.log("Using embedded data,", items.length, "items");
    return true;
  }
}

function showItem(){
  const cont = document.getElementById("content");
  
  if(items.length === 0) {
    console.error("No items loaded!");
    cont.innerHTML = "<div>Loading...</div>";
    cont.style.opacity = 1;
    return;
  }
  
  // Select a random item
  const randomIndex = Math.floor(Math.random() * items.length);
  const it = items[randomIndex];

  if(!it) {
    console.error("Item is null at index:", randomIndex);
    return;
  }

  console.log("Showing item:", it); // Debug log

  if(it.type === "text"){
    cont.innerHTML = `<div>${it.text}</div>`;
  } else if(it.type === "image"){
    cont.innerHTML = `
      <img src="${it.img}" alt="" />
      <div>${it.text}</div>
    `;
  } else {
    console.error("Unknown item type:", it.type);
    return;
  }

  // Ensure content is visible
  cont.style.display = "block";
  // Use requestAnimationFrame to ensure DOM is updated before changing opacity
  requestAnimationFrame(() => {
    cont.style.opacity = 1;
    console.log("Content opacity set to 1, innerHTML length:", cont.innerHTML.length);
  });
}

function hearts(){
  for(let i=0; i<6; i++){
    const h = document.createElement("div");
    h.className = "heart";
    h.style.left = (window.innerWidth/2 + (Math.random()*120-60))+"px";
    h.style.top  = (window.innerHeight/2)+"px";
    h.innerText = "ğŸ’";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1200);
  }
}

document.getElementById("nextBtn").addEventListener("click", ()=>{
  console.log("Button clicked, items length:", items.length);
  hearts();
  showItem();
});

// Handle opening animation
function startOpeningAnimation() {
  const openingScreen = document.getElementById("openingScreen");
  const mainContent = document.getElementById("mainContent");
  
  // After 2 seconds, fade out opening screen and show main content
  setTimeout(() => {
    openingScreen.classList.add("fade-out");
    mainContent.classList.add("show");
    
    // Remove opening screen from DOM after fade completes
    setTimeout(() => {
      openingScreen.style.display = "none";
    }, 800);
  }, 2000);
}

// Start opening animation when page loads
startOpeningAnimation();

loadData().then((success) => {
  console.log("Load data completed, success:", success, "items length:", items.length);
  if(success && items.length > 0) {
    console.log("Calling showItem on load");
    // Wait for opening animation to complete before showing first item
    setTimeout(() => {
      showItem();
    }, 2800);
  } else {
    console.error("Failed to load items or items array is empty");
    const cont = document.getElementById("content");
    setTimeout(() => {
      cont.innerHTML = "<div>No items to display. Please check the console.</div>";
      cont.style.opacity = 1;
    }, 2800);
  }
});
</script>

</body>
</html>
